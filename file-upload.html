<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>文件上传</title>
    <link rel="stylesheet" href="public/css/reset.css">
    <link rel="stylesheet" href="./public/layui/css/layui.css">
    <link rel="stylesheet" href="css/back.css">
    <link rel="stylesheet" href="css/file.css">
    <link rel="stylesheet" href="font/icon_font.css">
    <script src="./public/js/jquery-3.2.1.js"></script>
</head>
<body>


<div class="uld">


    <table class="layui-table upload" lay-skin="line">
        <colgroup>
            <col width="30% ">
            <col width="10% ">
            <col width=" 35%">
            <col width="20% ">
            <col width="5%">
            <col>
        </colgroup>

        <tbody>
        <tr>
            <td><i class="layui-icon file">&#xe60d;</i>  123.png </td>
            <td>23KB</td>
            <td>全部文件夹/新建文件夹</td>
            <td>等待上传</td>
            <td><a href="#"><i class="layui-icon">&#x1006;</i></a></td>
        </tr>
        <tr>
            <td><i class="layui-icon file">&#xe60d;</i>  123.png </td>
            <td>23KB</td>
            <td>全部文件夹/新建文件夹</td>
            <td>等待上传</td>
            <td><a href="#"><i class="layui-icon">&#x1006;</i></a></td>
        </tr>

        </tbody>
    </table>
    <hr class="layui-bg-gray">

    <div class="layui-upload">


        <p class="p1">
            <button type="button" class="layui-btn layui-bg-orange" id="test8">选择文件</button>

        </p>


        <p class="p2">
            <button type="button" class="layui-btn blue" id="test9">上传</button>
            <button  class="layui-btn cancel2 blue">取消</button>
        </p>

    </div>
</div>

<script src="./public/layui/layui.all.js"></script>
<script>
    //JavaScript代码区域
    layui.use('element', function(){
        var element = layui.element;

    });
    //关闭iframe
    $('.cancel2').click(function(){

        //注意：parent 是 JS 自带的全局对象，可用于操作父页面
        var index = parent.layer.getFrameIndex(window.name); //获取窗口索引

        var val = $('#name').val();
        if(val === ''){
            parent.layer.msg('请填写标记');
            return;
        }
        parent.layer.msg('取消上传啦');
        parent.layer.close(index);
    });

    // 上传
    layui.use('upload', function(){


        var $ = layui.jquery
            ,upload = layui.upload;

        //选完文件后不自动上传
        upload.render({
            elem: '#test8'
            ,url: '/upload/'
            ,auto: false
            //,multiple: true
            ,bindAction: '#test9'
            ,done: function(res){
                console.log(res)
            }
        });
    });


</script>
</body>
</html>